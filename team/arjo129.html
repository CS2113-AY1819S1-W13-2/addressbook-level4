<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Arjo - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">DiveLog</a><ul class="navbar-nav"><li class="nav-item"></li><a class="nav-link" href="../UserGuide.html">User Guide</a><li class="nav-item"></li><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></ul></div></nav></div><div id="header"><h1>Arjo - Project Portfolio</h1></div><div id="content"><div class="sect1">
<h2 id="project-divelog"><a class="link" href="#project-divelog">PROJECT: DiveLog</a></h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>DiveLog is a command line driven desktop dive log application for divers to calculate their blood nitrogen levels prior to conducting dives.
It was built to help divers plan so as to minimise the risk of decompression sickness. The app was originally based on <a href="https://github.com/nusCS2113-AY1819S1/addressbook-level4">Addressbook level 4</a> and
written as part of the requirements for NUS CS2113T in semester 1 of AY2018/2019.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: added <strong>consistency check between dives</strong></p>
<div class="ulist">
<ul>
<li>
<p>What it does: When a dive is added or edited, one must always check whether the dive is safe to attempt or not given previous diving history.</p>
</li>
<li>
<p>Justification: If a user enters a dive that is too long, deep or makes subsequent dives unsafe he or she must be warned.</p>
</li>
<li>
<p>Highlights: This enhancement affects both the <code>add</code> and <code>edit</code> command.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancements</strong>: Added a <code>set_units</code> command which makes the app switch between feet and meters,
integrated timezones into calculations, morphed the model.</p>
</li>
<li>
<p><strong>Code contributed</strong>: <a href="https://nuscs2113-ay1819s1.github.io/dashboard/#=undefined&amp;search=arjo129&amp;sort=displayName&amp;since=2018-09-12&amp;until=2018-11-04&amp;timeframe=day&amp;reverse=false&amp;repoSort=true">RepoSense Dashboard</a></p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Managed releases <code>v1.1</code> - <code>v1.4</code> (4 releases) on GitHub</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to existing features:</p>
<div class="ulist">
<ul>
<li>
<p>Performed initial morph of model and UI. Added the <code>DiveSession</code> object. (Pull requests <a href="https://github.com/CS2113-AY1819S1-W13-2/main/pull/1">#1</a>, <a href="https://github.com/CS2113-AY1819S1-W13-2/main/pull/2">#2</a>, <a href="https://github.com/CS2113-AY1819S1-W13-2/main/pull/3">#3</a>, <a href="https://github.com/CS2113-AY1819S1-W13-2/main/pull/6">#6</a>)</p>
</li>
<li>
<p>Adapted old tests to make them work for the divelog. Including rewriting handles for GUI tests. (Pull request <a href="https://github.com/CS2113-AY1819S1-W13-2/main/pull/28">#28</a>)</p>
</li>
<li>
<p>Initial implementation of look up tables for pressuregroup calculations (Pull request <a href="https://github.com/CS2113-AY1819S1-W13-2/main/pull/38">#38</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>PRs reviewed (with non-trivial review comments): <a href="https://github.com/CS2113-AY1819S1-W13-2/main/pull/119">#119</a>, <a href="https://github.com/CS2113-AY1819S1-W13-2/main/pull/66">#66</a>, <a href="https://github.com/CS2113-AY1819S1-W13-2/main/pull/125">#125</a>, <a href="https://github.com/CS2113-AY1819S1-W13-2/main/pull/68">#68</a>,</p>
</li>
<li>
<p>Contributed to forum discussions (examples:  <a href="https://github.com/nusCS2113-AY1819S1/forum/issues/58">#58</a>, <a href="https://github.com/nusCS2113-AY1819S1/forum/issues/62">#62</a>, <a href="https://github.com/nusCS2113-AY1819S1/forum/issues/29">#29</a>)</p>
</li>
<li>
<p>Reported bugs and suggestions for other teams in the class (examples: <a href="https://github.com/CS2113-AY1819S1-W12-3/main/issues/152">1</a> , <a href="https://github.com/CS2113-AY1819S1-W12-3/main/issues/149">2</a>, <a href="https://github.com/CS2113-AY1819S1-W12-3/main/issues/142">3</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Documented a product survey in the appendix of the developer guide.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="add"><a class="link" href="#add">Adding a dive session: <code>add</code></a></h3>
<div class="paragraph">
<p>Use this command to adds your new dive session to the Dive Log.</p>
</div>
<div class="paragraph">
<p>Format: <code>add ds/DATE_STARTED ts/TIME_DIVE_STARTED de/DATE_ENDED te/TIME_DIVE_ENDED ss/SAFETY_STOP  d/DEPTH  l/LOCATION</code></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Words in UPPER_CASE are the parameters, items in SQUARE_BRACKETS are optional. Order of parameters are fixed as per the format above, meaning if you entered the ts/TIME_DIVE_STARTED before the ds/DATE_STARTED,
the program will not be able to add your dive.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Put a <code>ts/</code> before the time started(24 hours format - HHMM), te/time ended (24 hours format - HHMM), d/depth (in metres), l/ location (location name), per dive at v1.0) (optional) and pg/initial pressure group.</p>
</div>
<div class="paragraph">
<p><em>Example:</em> <code>add ds/04082018 ts/0900 de/04082018 te/1020 ss/1015 d/15 l/Bukit Lagoon tz/+8</code></p>
</div>
<div class="paragraph">
<p>A list of possible command flags is shown below.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Table of Prefix and Data</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data</th>
<th class="tableblock halign-left valign-top">Prefix</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date started / Ended (DDMMYYYY)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ds or de</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ds/04082018 or de/05082018</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time Started / Ended (HHMM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts or te</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts/0800 or te/0900</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">l</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">l/Sentosa</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depth (integer value). Depending on whether the app is set to use meters or feet, the value used will change.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">d/18</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timezone (in UTC)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tz/+12 or tz/-5</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Adding a command may fail for a variety of reasons. This is to ensure your safety during dives. As a rule of thumb some reasons why a dive may not be added include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The dive puts you outside the safety guidelines given by padi (i.e. its too deep or long).</p>
</li>
<li>
<p>The dive makes future dives too risky.</p>
</li>
<li>
<p>The dive timing overlaps with another dive.</p>
</li>
<li>
<p>Issues with the way you entered the command.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An important thing to note is that your safety stop time must be between your start and end time.</p>
</div>
<div class="paragraph">
<p>If for instance you enter an invalid dive, the system will tell you that you have dived to deep. Some common error messages are shown below:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Common error messages (non-exhaustive list)</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Error Messages</th>
<th class="tableblock halign-left valign-top">Cause</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The dive overlaps with another dive. Not updating the divelog.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">There is another dive which is occuring at the same time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dive is too deep and too long!!</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The dive you added is too long/deep given your current plans. This message is often accompanied by advice about how you can stay safe. Please follow it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invalid date format! (Not DDMMYYYY)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date you entered is invalid. Make sure the date is in the form of DDMMYYYY</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invalid time format! (Not HHMM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time entered is in invalid format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Start and End date or time or Safety Stop Time are not in chronological order! Start Date should be earlier than End Date! Safety Stop should be between Start and End time"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You need to make sure that your start time is before your end time and safety stop comes inbetween.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="set_units"><a class="link" href="#set_units">Setting display units <code>set_units</code></a></h3>
<div class="paragraph">
<p>If you&#8217;re not used to the metric or imperial system, <code>set_units</code>
switches between meters and feet. (App defaults to meters) All data displayed will be automatically and accurately converted <br>
Format: <code>set_units meters|feet</code><br></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>As of v1.4 it updates both the DISPLAY units and the actual entered units.</p>
</li>
<li>
<p>The settings are not saved upon application restart.</p>
</li>
<li>
<p>Internally, we store everything in meters, as a result the xml file produced will always be in meters.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Example usage: <code>set_units feet</code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="Design-Model"><a class="link" href="#Design-Model">Model component</a></h3>
<div class="imageblock">
<div class="content">
<img src="../images/ModelClassDiagram.png" alt="ModelClassDiagram" width="800">
</div>
<div class="title">Figure 1. Structure of the Model Component</div>
</div>
<div class="paragraph">
<p><strong>API</strong> : <a href="{repoURL}/src/main/java/seedu/address/model/Model.java"><code>Model.java</code></a></p>
</div>
<div class="paragraph">
<p>The <code>Model</code>,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>stores a <code>UserPref</code> object that represents the user&#8217;s preferences.</p>
</li>
<li>
<p>stores the DiveLog data.</p>
</li>
<li>
<p>enforces relational rules between dive sessions (i.e Dives may not overlap). For more information on this take a look at the section on <a href="#CRUD">[CRUD]</a>.</p>
</li>
<li>
<p>exposes an unmodifiable <code>ObservableList&lt;DiveSession&gt;</code> that can be 'observed' e.g. the UI can be bound to this list so that the UI automatically updates when the data in the list change.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Some choices made here include the encapsulation of even simple values such as depth which is stored as a <code>DepthProfile</code> object.
By doing so suppose we want to extend Depth to support complex dives with multiple depths or different units, we can simply update
<code>DepthProfile</code> without breaking existing code. Similarly, we also decided to have <code>DiveSession</code> implement java&#8217;s <code>Comparable</code> interface
as it makes sorting the dives easier. Sorting the dives is an essential part of making sure that the dives retain their integrity.</p>
</div>
<div class="paragraph">
<p>A rough summary of what each class does is as follows:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Class(es)</th>
<th class="tableblock halign-left valign-top">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DiveSession</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Holds data about the dives. Provides a few getters and setters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Time</code>, <code>OurDate</code>, <code>PressureGroup</code>, <code>DepthProfile</code>, <code>Location</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encapsulates simple properties of the dives</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DiveSessionList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stores a list of <code>DiveSessions</code> and provides properties of the list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DiveLog</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handles updating the DiveSessionList.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VersionedDiveLog</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handles undo/redo feature and versioning.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="lookuptable"><a class="link" href="#lookuptable">Looking Up Dive Tables For Pressure Groups</a></h3>
<div class="paragraph">
<p>At the heart of the divelog app is the ability to automatically calculate nitrogen pressure groups.
To do so we adhere to PADI&#8217;s dive charts, available here <a href="https://elearning.padi.com/company0/tools/RDP_Table%20Met.pdf" class="bare">https://elearning.padi.com/company0/tools/RDP_Table%20Met.pdf</a>. These charts provide a lookup table for divers through which they can determine
their current pressure group. The underlying implementation for these charts can be found in the <code>PadiDiveTable</code> class.
A such the dive tales are stored in the <code>resources</code> folder as JSON files. They are loaded using the <code>DiveTableUtil</code> class
via the FASTXML Jackson library. The <code>PadiDiveTable</code> itself is a singleton class. This choice was made as it makes sense to
load the Dive Tables only once at the stat into memory (although in its current form it is not the case).</p>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-retrieving-dive-tables"><a class="link" href="#aspect-retrieving-dive-tables">Aspect: Retrieving Dive Tables</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Use JSON files</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to change data within tables.</p>
</li>
<li>
<p>Cons: May have performance issues if the tables are too large as it reads from disk.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Hard code the tables</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Have mildly smaller impact on performance as data is loaded into memory at start up.</p>
</li>
<li>
<p>Cons: Very tedious to implement, results in unreadable code.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-minimising-file-reads-and-data-duplication"><a class="link" href="#aspect-minimising-file-reads-and-data-duplication">Aspect: Minimising File Reads And Data Duplication</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice)</strong>: Use a singleton class</p>
<div class="ulist">
<ul>
<li>
<p>Pros: It is possible to read the file only once and the memory used by the objects will only exist in one place.
This saves both memory and disc writes.</p>
</li>
<li>
<p>Cons: Can be troublesome to implement.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2: </strong> Just use <code>PADIDiveTable</code> standard classes</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement</p>
</li>
<li>
<p>Cons: Wastes memory and performs unnecessary IO.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="localized-units"><a class="link" href="#localized-units">Localized Units</a></h3>
<div class="paragraph">
<p>As of <code>v1.3</code>, a <code>set_units</code> command was added. This allows the user to switch between meters and feet.
As shown in the diagram below, the implementation of this command involves altering the <code>ApplicationState</code> singleton. Once the <code>ApplicationState</code>
is updated a <code>UnitsChangedEvent</code> is posted to the <code>EventsCenter</code>. The <code>EventsCenter</code> issues a
call to the UI. The relevant parts of the UI will be forced to re-render themselves to match
the new units.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/setunitsSequenceDiagram.png" alt="setunitsSequenceDiagram" width="450">
</div>
</div>
<div class="paragraph">
<p>As of <code>v1.4</code> the <code>ParserUtil#parseDepthProfile(String depth)</code> also reads this state, and converts the units to meters.
Internally all the units are stored as meters. This choice was largely made to keep things simple. The
<code>ApplicationState</code> also exposes a function to get the current units setting.</p>
</div>
</div>
<div class="sect2">
<h3 id="consistency-checks-for-code-divesession-code-objects-during-creation-update"><a class="link" href="#consistency-checks-for-code-divesession-code-objects-during-creation-update">Consistency checks for <code>DiveSession</code> objects during Creation/Update</a></h3>
<div class="paragraph">
<p>At its heart, the application is a dive log. The source code for this application was adopted from an addressbook application.
The addressbook has a relatively simple set of rules, DiveLog on the other hand has a more complicated set of rules which have to be followed.
This is because the starting pressure group on each dive is dependent on the previous dive&#8217;s end time and ending pressure group. In turn,
the ending pressure group is dependent on the starting pressure group and depth of a dive. This poses a lot of problems as a single update
to the system requires recalculating all subsequent dive&#8217;s pressure groups. Furthermore, it is only after
all calculations are complete that the system can make sure that the update is valid. Some possible sources of inconsistency include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Dives with overlapping time periods - these cause problems in the chain as the PADI tables are only meant to be used by a single diver doing one dive at a time.</p>
</li>
<li>
<p>Dives that are deemed too deep and too long by PADI - we have no way of determining their nitrogen level apat from the tables.</p>
</li>
<li>
<p>Dives which cause other dives to become too dangrous. Lets say you add a dive inbetween two dives. This may cause the later dive to be deemed as too dangerous.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At the end we have incorporated most of the code into our model. For <code>add</code> and <code>edit</code> we required atomicity thus the general flow is as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a temporary copy of the <code>DiveSessionList</code>.</p>
</li>
<li>
<p>Perform the update/addition on this list and sort it to make calculations easier.</p>
</li>
<li>
<p>Check if there are any overlapping dives</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If there are overlapping dives throw <code>DiveOverlapsException</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Recalculate pressure groups and check for consistency</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If not consistent throw <code>LimitExceededException</code> error.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Commit new <code>DiveSessionList</code> to divelog. Update <code>VersionedDivelog</code> 's current pointer.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The flow can be seen in the sequence diagram below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/ConsistencyCheckSequenceDiagram.png" alt="width: 650px">
</div>
</div>
<div class="paragraph">
<p>In terms of calculations, the pressure group properties of the dives themselves will mutate to support</p>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">Design Considerations</a></h4>
<div class="paragraph">
<p>Upon failure of calculations it is important that the divelog remains in a consistent state. For instance, when updating the dive log if after adding a dive we see that
it is causing issues in the dive log, or if we edit a dive to have overlapping time periods with another dive, the divelog should roll back the latest transaction and throw an error.
This calls for atomicity in our Create, Update and Delete. Fortunately, in our case, deleting the dive cannot actually cause a violation as it only makes the
dives safer. Thus our design considerations could be summed up as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure consistency in the divelog</p>
</li>
<li>
<p>Ensure creating and Updating the divelog are atomic</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="aspect-ensure-consistency-in-the-divelog"><a class="link" href="#aspect-ensure-consistency-in-the-divelog">Aspect: Ensure consistency in the divelog</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1</strong>: implementing rules for consistency in <code>logic</code> module.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Stronger Separation of Concerns.</p>
</li>
<li>
<p>Cons: Will require duplicating code accross <code>AddCommand</code> and <code>EditCommand</code>. This will lead to inconsistent behaviour between the two and more lines of code to debug.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2</strong>: implementing rules for consistency in <code>model</code> module.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Only one code base to debug. System will remain consistent.</p>
</li>
<li>
<p>Cons: Weaker separation of concerns than if implemented separately. Can also mean a bug effects both add and edit making the system unreliable.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-ensure-creating-and-updating-the-divelog-are-atomic"><a class="link" href="#aspect-ensure-creating-and-updating-the-divelog-are-atomic">Aspect: Ensure creating and updating the divelog are atomic</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1</strong>: Creating a temporary copy of the list and mutating the copy</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Simple to implement and fast.</p>
</li>
<li>
<p>Cons: Inefficient</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2</strong>: Having a separate data structure that only handles mutation after the edited dive.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Will be more efficient.</p>
</li>
<li>
<p>Cons: More code will need to be written. Since <code>VersionedDiveLog</code> already maintains copies, it is just a matter of passing the reference of the temporary dive list to the system.
Furthermore, most divers will not have more than 100 dives.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2018-11-12 03:00:39 UTC</div></div></div></body></html>